<h2>Key: {{key}}</h2>
<!-- radio button to switch the current_state -->
<input type="radio" name="state" value="encrypt" (click)="current_state='encrypt'">Encrypt
<input type="radio" name="state" value="decrypt" (click)="current_state='decrypt'">Decrypt
<div class="container-fluid">

    <div class="btn-group w-100" role="group" aria-label="Basic radio toggle button group">
        <input type="radio" class="btn-check w-50" name="state" id="encrypt" autocomplete="off" value="encrypt"
            (click)="current_state='encrypt'">
        <label class="btn btn-outline-primary" for="encrypt">Encrypt</label>

        <input type="radio" class="btn-check w-50" name="state" id="decrypt" autocomplete="off" value="decrypt"
            (click)="current_state='decrypt'">
        <label class="btn btn-outline-primary" for="decrypt">Decrypt</label>
    </div>
    <div class="container-fluid m-0 content">
        <!-- show this div if current_state="encrypt" -->
        <div id="encrypt_div" [hidden]="current_state!='encrypt'">
            <h1>Encryption</h1>
            <h2> Selected Files</h2>
            <button (click)="select_files_to_encrypt()">
                Select files
            </button>
            <ul class="list-group">
                <li class="list-group-item" *ngFor="let file of encryption_selected_files">
                    {{file}}
                </li>
            </ul>


            <!-- <div class="p-1">

                <div class="list-group list-group-root well p-0">

                    <a href="#item-1" class="list-group-item" data-bs-toggle="collapse">
                        <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 1
                    </a>
                    <div class="list-group collapse" id="item-1">

                        <a href="#item-1-1" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 1.1
                        </a>
                        <div class="list-group collapse" id="item-1-1">
                            <a href="#" class="list-group-item">Item 1.1.1</a>
                            <a href="#" class="list-group-item">Item 1.1.2</a>
                            <a href="#" class="list-group-item">Item 1.1.3</a>
                        </div>

                        <a href="#item-1-2" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 1.2
                        </a>
                        <div class="list-group collapse" id="item-1-2">
                            <a href="#" class="list-group-item">Item 1.2.1</a>
                            <a href="#" class="list-group-item">Item 1.2.2</a>
                            <a href="#" class="list-group-item">Item 1.2.3</a>
                        </div>

                        <a href="#item-1-3" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 1.3
                        </a>
                        <div class="list-group collapse" id="item-1-3">
                            <a href="#" class="list-group-item">Item 1.3.1</a>
                            <a href="#" class="list-group-item">Item 1.3.2</a>
                            <a href="#" class="list-group-item">Item 1.3.3</a>
                        </div>

                    </div>

                    <a href="#item-2" class="list-group-item" data-bs-toggle="collapse">
                        <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 2
                    </a>
                    <div class="list-group collapse" id="item-2">

                        <a href="#item-2-1" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 2.1
                        </a>
                        <div class="list-group collapse" id="item-2-1">
                            <a href="#" class="list-group-item">Item 2.1.1</a>
                            <a href="#" class="list-group-item">Item 2.1.2</a>
                            <a href="#" class="list-group-item">Item 2.1.3</a>
                        </div>

                        <a href="#item-2-2" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 2.2
                        </a>
                        <div class="list-group collapse" id="item-2-2">
                            <a href="#" class="list-group-item">Item 2.2.1</a>
                            <a href="#" class="list-group-item">Item 2.2.2</a>
                            <a href="#" class="list-group-item">Item 2.2.3</a>
                        </div>

                        <a href="#item-2-3" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 2.3
                        </a>
                        <div class="list-group collapse" id="item-2-3">
                            <a href="#" class="list-group-item">Item 2.3.1</a>
                            <a href="#" class="list-group-item">Item 2.3.2</a>
                            <a href="#" class="list-group-item">Item 2.3.3</a>
                        </div>

                    </div>


                    <a href="#item-3" class="list-group-item" data-bs-toggle="collapse">
                        <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 3
                    </a>
                    <div class="list-group collapse" id="item-3">

                        <a href="#item-3-1" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 3.1
                        </a>
                        <div class="list-group collapse" id="item-3-1">
                            <a href="#" class="list-group-item">Item 3.1.1</a>
                            <a href="#" class="list-group-item">Item 3.1.2</a>
                            <a href="#" class="list-group-item">Item 3.1.3</a>
                        </div>

                        <a href="#item-3-2" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 3.2
                        </a>
                        <div class="list-group collapse" id="item-3-2">
                            <a href="#" class="list-group-item">Item 3.2.1</a>
                            <a href="#" class="list-group-item">Item 3.2.2</a>
                            <a href="#" class="list-group-item">Item 3.2.3</a>
                        </div>

                        <a href="#item-3-3" class="list-group-item" data-bs-toggle="collapse">
                            <i class="fa-sharp fa-solid fa-chevron-right"></i>Item 3.3
                        </a>
                        <div class="list-group collapse" id="item-3-3">
                            <a href="#" class="list-group-item">Item 3.3.1</a>
                            <a href="#" class="list-group-item">Item 3.3.2</a>
                            <a href="#" class="list-group-item">Item 3.3.3</a>
                        </div>

                    </div>

                </div>

            </div> -->

            
            <h2> Selected Folder</h2>
            <button (click)="select_folder_to_encrypt()">
                Select Folder
            </button>
            <h4>{{encryption_selected_folder}}</h4>


            <div class="p-1">
                <ng-template #ul_li let-obj>
                    <div class="list-group list-group-root well p-0">
                            <span *ngFor="let file of obj" class="list-group-item" data-bs-toggle="collapse">
                                <!-- <i class="fa-sharp fa-solid fa-chevron-right"></i> -->
                                {{file.name}}
                                <ng-template [ngTemplateOutlet]="ul_li" [ngTemplateOutletContext]="{ 
                                    $implicit: file.children 
                                  }" *ngIf="file.children"></ng-template>
                            </span>
                    </div>
                </ng-template>
            
                <ng-template [ngTemplateOutlet]="ul_li" [ngTemplateOutletContext]="{ 
                    $implicit: encrypt_dir_obj 
                  }" *ngIf="encrypt_dir_obj.length!=0">
                      </ng-template>
            </div>

            <h2>Destination Encryption path</h2>
            <button (click)="select_encryption_destination_folder()">
                Select destination folder
            </button>
            <h4>{{encryption_destination_folder}}</h4>

            <button (click)="encrypt()">
                Encrypt
            </button>
            <ul>
                <li *ngFor="let error of encrypt_errors">
                    {{error}}
                </li>
            </ul>
            <!-- success message -->
            <h3 id="success_message" [hidden]="!encryption_success"> Success ✅</h3>
        </div>
        <div class="decrypt_div" [hidden]="current_state!='decrypt'">
            <h1>Decryption</h1>
            <h2> Selected Files</h2>
            <button (click)="select_files_to_decrypt()">
                Select files
            </button>
            <ul>
                <li *ngFor="let file of decryption_selected_files">
                    {{file}}
                </li>
            </ul>
            <h2> Selected Folder</h2>
            <button (click)="select_folder_to_decrypt()">
                Select Folder
            </button>
            <h4>{{decryption_selected_folder}}</h4>
            <ng-template [ngTemplateOutlet]="ul_li" [ngTemplateOutletContext]="{ 
          $implicit: decrypt_dir_obj 
        }" *ngIf="decrypt_dir_obj.length!=0">
            </ng-template>
            <h2>Destination Decryption path</h2>
            <button (click)="select_decryption_destination_folder()">
                Select destination folder
            </button>
            <h3>{{decryption_destination_folder}}</h3>

            <div id="decrypt_success" [hidden]="!decryption_success">Success ✅</div>
            <button (click)="decrypt_all()">
                Decrypt
            </button>
            <ul>
                <li *ngFor="let error of decrypt_errors">
                    {{error}}
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="container-fluid main m-2">
    <div class="row">
        <div class="col-12">
            <app-sidebar></app-sidebar>
        </div>
        <div class="col-9"></div>
    </div>
</div>